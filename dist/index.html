<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Soccer Pad</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" type="text/css" href="css/index.css">  
  <style type="text/css">
    .blue {
      background: #037ECF !important;
      color: white;
    }
    .white {
      background: #fafafa !important;
      color: black;
    }
  </style>

  <script>
/*
 AngularJS v1.3.0
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(){'use strict';function d(b){return function(){var c=arguments[0],e;e="["+(b?b+":":"")+c+"] http://errors.angularjs.org/1.3.0/"+(b?b+"/":"")+c;for(c=1;c<arguments.length;c++){e=e+(1==c?"?":"&")+"p"+(c-1)+"=";var d=encodeURIComponent,a;a=arguments[c];a="function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a;e+=d(a)}return Error(e)}}(function(b){function c(a,c,b){return a[c]||(a[c]=b())}var e=d("$injector"),n=d("ng");
b=c(b,"angular",Object);b.$minErr=b.$minErr||d;return c(b,"module",function(){var a={};return function(b,d,g){if("hasOwnProperty"===b)throw n("badname","module");d&&a.hasOwnProperty(b)&&(a[b]=null);return c(a,b,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,d,arguments]);return h}}if(!d)throw e("nomod",b);var c=[],k=[],l=[],m=a("$injector","invoke","push",k),h={_invokeQueue:c,_configBlocks:k,_runBlocks:l,requires:d,name:b,provider:a("$provide","provider"),factory:a("$provide",
"factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:m,run:function(a){l.push(a);return this}};g&&m(g);return h})}})})(window)})(window);

  /*!
   * $script.js Async loader & dependency manager
   * https://github.com/ded/script.js
   * (c) Dustin Diaz, Jacob Thornton 2011
   * License: MIT
   */
  (function(a,b,c){typeof c["module"]!="undefined"&&c.module.exports?c.module.exports=b():typeof c["define"]!="undefined"&&c["define"]=="function"&&c.define.amd?define(a,b):c[a]=b()})("$script",function(){function p(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1}function q(a,b){p(a,function(a){return!b(a)})}function r(a,b,i){function o(a){return a.call?a():d[a]}function t(){if(!--n){d[m]=1,l&&l();for(var a in f)p(a.split("|"),o)&&!q(f[a],o)&&(f[a]=[])}}a=a[k]?a:[a];var j=b&&b.call,l=j?b:i,m=j?a.join(""):b,n=a.length;return setTimeout(function(){q(a,function(a){if(h[a])return m&&(e[m]=1),h[a]==2&&t();h[a]=1,m&&(e[m]=1),s(!c.test(a)&&g?g+a+".js":a,t)})},0),r}function s(c,d){var e=a.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){if(e[m]&&!/^c|loade/.test(e[m])||f)return;e.onload=e[o]=null,f=1,h[c]=2,d()},e.async=1,e.src=c,b.insertBefore(e,b.firstChild)}var a=document,b=a.getElementsByTagName("head")[0],c=/^https?:\/\//,d={},e={},f={},g,h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange";return!a[m]&&a[n]&&(a[n](l,function t(){a.removeEventListener(l,t,j),a[m]="complete"},j),a[m]="loading"),r.get=s,r.order=function(a,b,c){(function d(e){e=a.shift(),a.length?r(e,d):r(e,b,c)})()},r.path=function(a){g=a},r.ready=function(a,b,c){a=a[k]?a:[a];var e=[];return!q(a,function(a){d[a]||e[k](a)})&&p(a,function(a){return d[a]})?b():!function(a){f[a]=f[a]||[],f[a][k](b),c&&c(e)}(a.join("|")),r},r},this)
  </script>  

</head>
<body>

  <!-- Preloaded templates used in directives -->
  <script id="btsCombo" type="text/ng-template"><div class="dropdown">
	<button class="btn btn-primary dropdown-toggle">
		<span class="dropdown-label"></span>
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu" role="menu" ng-transclude>
	</ul>
</div></script>
  <script id="selectorDropdown" type="text/ng-template"><div class="dropdown">
	<div class="dropdown-toggle">
		<div class="position-badge">{{position}}</div>
		<span class="dropdown-label"></span>
	</div>
	<ul class="dropdown-menu" role="menu" ng-transclude>
	</ul>
</div></script>
  <script id="playerSelector" type="text/ng-template"><ul bts-combo toggle-default="" ng-model="selectedPlayer" template="selectorDropdown">	
	<li ng-repeat="player in players" bts-combo-item="player" bts-combo-label="player.name">
		<a tabindex="-1" href="#">{{player.name}}</a>
	</li>
</ul>
</script>
  <script id="sortable" type="text/ng-template"><div class="sortColumn" ng-transclude></div>
<span class="glyphicon"
      ng-class="{'glyphicon-chevron-down': isSorted && isAsc, 'glyphicon-chevron-up': isSorted && !isAsc, 'sortPadded': !isSorted}">
</span>
</script>
  <script id="pager" type="text/ng-template"><ul class="pagination pull-right">
	<li ng-class="{disabled: isFirst()}"><a ng-click="first()">First</a></li>
	<li ng-class="{disabled: isFirst()}"><a ng-click="prev()">Prev</a></li>
	<li ng-repeat="pageButton in pageButtons" ng-class="{active: isCurrent(pageButton.page)}">
		<a ng-click="goTo(pageButton.page)" >{{pageButton.page}}</a>
	</li>
	<li ng-class="{disabled: isLast()}"><a ng-click="next()">Next</a></li>
	<li ng-class="{disabled: isLast()}"><a ng-click="last()">Last</a></li>
</ul></script>
  <script id="table" type="text/ng-template"><div ng-controller="TableCtrl">

	<div class="col-md-8 column soccer-table">
		<img src="img/table.jpg" />
		
		<div player-selector="table.whiteDefender" players="players" position="DEFENDER" 
			style="left:90px; min-width:130px;" class="player-selector white"></div>

		<div player-selector="table.whiteAttacker" players="players" position="ATTACKER" 
			style="left:340px; min-width:180px" class="player-selector white"></div>

		<div player-selector="table.blueAttacker" players="players" position="ATTACKER" 
			style="left:270px; min-width:170px" class="player-selector blue"></div>

		<div player-selector="table.blueDefender" players="players" position="DEFENDER" 
			style="left:500px; min-width:140px" class="player-selector blue"></div>
		
	</div>

	<div class="col-md-4 column">
		<div class="scores">
			
			<h1>Score</h1>
			
			<input type="text" class="form-control pull-left score-input white" ng-model="score.white" />
			<input type="text" class="form-control pull-right score-input blue" ng-model="score.blue" />
			
			<button class="btn btn-warning btn-lg score-save" ng-disabled="isSaveDisabled()" ng-click="save()">Save match</button>
		</div>
		
	</div>

</div></script>
  <script id="ratings" type="text/ng-template"><div ng-controller="RatingsCtrl">
	
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th rowspan="2">Name</th>
				<th colspan="2">
					<ul bts-combo ng-model="selectedPeriod">
						<li ng-repeat="period in model.periods" bts-combo-item="period" bts-combo-label="period.title">
							<a tabindex="-1" href="#">{{period.title}}</a>
						</li>
					</ul>
				</th>
				<th colspan="2">RATING</th>
				<th colspan="2">DEFENDER</th>
				<th colspan="2">ATTACKER</th>
    			<th colspan="2" class="white">WHITE</th>
				<th colspan="2" class="blue">BLUE</th>
				<th>BADGES</th>
			</tr>
			<tr>

				<th sortable="playerSort" column="games">Games</th>
				<th sortable="playerSort" column="winPerc" style="width:120px">% of wins</th>
				<th sortable="playerSort" column="mean">Rating</th>
				<th sortable="playerSort" column="change" style="width:120px">Change</th>
				<th sortable="playerSort" column="winD">Win</th>
				<th sortable="playerSort" column="lossD">Loss</th>
				<th sortable="playerSort" column="winA">Win</th>
				<th sortable="playerSort" column="lossA" style="width:100px">Loss</th>
				<th sortable="playerSort" column="winW">Win</th>
				<th sortable="playerSort" column="lossW">Loss</th>
				<th sortable="playerSort" column="winB">Win</th>
				<th sortable="playerSort" column="lossB">Loss</th>
				<th sortable="playerSort" column="greenBadges"><span class="label label-success">10 : 0</span></th>
			</tr>
		</thead>
		<tr ng-repeat="tableRow in tableRows | orderBy:playerSort.column:playerSort.descending">
			<td>{{tableRow.name}}</td>
			<td>{{tableRow.games}}</td>
			<td>{{tableRow.winPerc.toFixed(0)}}%</td>
			<td class="rating">{{tableRow.mean.toFixed(2)}}</td>
			<td class="rating-change" ng-class="{decrease: !tableRow.meanUp, increase: tableRow.meanUp}">
				<span class="glyphicon" ng-class="{'glyphicon-chevron-down': !tableRow.meanUp, 'glyphicon-chevron-up': tableRow.meanUp}"></span>
				<span class="value">{{tableRow.change.toFixed(2)}}</span>
			</td>
			<td>{{tableRow.winD}}</td>
			<td>{{tableRow.lossD}}</td>
			<td>{{tableRow.winA}}</td>
			<td>{{tableRow.lossA}}</td>
			<td class="white">{{tableRow.winW}}</td>
			<td class="white">{{tableRow.lossW}}</td>
			<td class="blue">{{tableRow.winB}}</td>
			<td class="blue">{{tableRow.lossB}}</td>
			<td>{{tableRow.greenBadges}}</td>
		</tr>
	</table>

</div></script>
  <script id="settings" type="text/ng-template"><div ng-controller="SettingsCtrl" ng-init="selectedItem = 'players'">

	<div class="list-group col-md-4 column" selectable-list="selectedItem">
	  <a href="#" class="list-group-item" ng-class="{active: selectedItem=='players'}" list-item="players">
	    <h4 class="list-group-item-heading">Players</h4>
	    <p class="list-group-item-text">Adding, removing or hidding players</p>
	  </a>
	  <a href="#" class="list-group-item" ng-class="{active: selectedItem=='options'}" list-item="options">
	    <h4 class="list-group-item-heading">Ratings options</h4>
	    <p class="list-group-item-text">Settings paramters, recalculating all ratings again.</p>
	  </a>
	</div>
	
	<div ng-include src="selectedItem" class="view-animate col-md-8 column"> 
	</div>
</div></script>
  <script id="players" type="text/ng-template"><div ng-controller="PlayersCtrl" class="players">

	<form class="form-inline" role="form">
		<div class="form-group">
			<label class="sr-only" for="playerName">Player name</label>
			<input type="text" ng-model="playerName" class="form-control" id="playerName" placeholder="Enter player name">
		</div>
		<button type="submit" class="btn btn-primary" ng-click="addPlayer()">Add player</button>
	</form>
	
	<hr/>

	<table class="table table-condensed table-hover">
		<thead>
			<tr>
				<th>Name</th>
				<th>Uid</th>
				<th>Created</th>				
				<th>Actions</th>
			</tr>
		</thead>
  		<tr ng-repeat="player in model.players" ng-class="{disabled: player.disabled}">
  			<td>{{player.name}}</td>
  			<td>{{player.uid}}</td>
  			<td></td>
  			<td>
				<button ng-hide="player.disabled" class="btn btn-warning btn-xs" ng-click="disablePlayer(player.uid)">Disable</button>
				<button ng-show="player.disabled" class="btn btn-success btn-xs" ng-click="activatePlayer(player.uid)">Activate</button>
  			</td>
  		</tr>	
	</table>

</div></script>
  <script id="options" type="text/ng-template"><div ng-controller="OptionsCtrl">
	<div class="clearfix">
		<p>Click 'Recalculate ratings' to delete all existing ratings and recalculate them again. It may take a while depending on the number of saved games.</p>
		<button class="btn btn-danger pull-right" ng-click="recalculate()">Recalculate Ratings</button>
	</div>
</div></script>
  <script id="games" type="text/ng-template"><div ng-controller="GamesCtrl">
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>Date</th>
				<th style="text-align:right;">White defender</th>
				<th>White attacker</th>
				<th></th>
				<th style="text-align:right;">Blue defender</th>
				<th>Blue attacker</th>
				<th></th>
				<th>Score</th>
				<th>Label</th>
				<th style="text-align: right"></th>
			</tr>
		</thead>
		<tr ng-repeat="game in model.games" ng-class="{today: game.today}">
			<td class="col-xs-3"><span class="label label-warning" ng-show="game.today" style="margin-right: 10px">Today</span><div game-date="{{game.date}}"></div></td>
			<td class="col-xs-1" style="text-align:right;">{{model.playersMapping[game.whiteDefender].name}}</td>
			<td class="col-xs-1">{{model.playersMapping[game.whiteAttacker].name}}</td>
			<td class="col-xs-1"></td>
			<td class="col-xs-1" style="text-align:right;">{{model.playersMapping[game.blueDefender].name}}</td>
			<td class="col-xs-1">{{model.playersMapping[game.blueAttacker].name}}</td>
			<td class="col-xs-1"></td>
			<td class="col-xs-1">{{game.whiteScore}} : {{game.blueScore}}</td>
			<td class="col-xs-1">
				<span class="label label-info" ng-show="game.new">New</span>
				<span class="label label-success" ng-show="!game.whiteScore || !game.blueScore">{{game.whiteScore}} : {{game.blueScore}}</span>				
			</td>
			<td class="col-xs-1" style="text-align: right">
				<a href="#" ng-show="game.removable" ng-click="deleteGame(game.id)"><span class="glyphicon glyphicon-remove"></span></a>
			</td>
		</tr>
	</table>
</div></script>

  <!-- Application content -->
  
<div class="container" ng-controller="AppCtrl">

	<div class="page-header" style="border-bottom:none; ">
		<h1>
			Soccer Pad <small>The best way to note your scores</small>
		</h1>
		<ul class="nav nav-tabs" tabs="app.tab" style="margin-top:-40px">
		  <li pane="settings" class="pull-right"><span class="glyphicon glyphicon-cog"></span> Settings</li>
		  <li pane="games" class="pull-right"><span class="glyphicon glyphicon-list-alt"></span> Games</li>
		  <li pane="ratings" class="pull-right"><span class="glyphicon glyphicon-stats"></span> Ratings</li>
		  <li pane="table" selected="true" class="pull-right"><span class="glyphicon glyphicon-play"></span> Table</li>
		</ul>
	</div>

	<div ng-include src="app.tab.route" class="view-animate"> 
	</div>

</div>

  
  <!-- Scripts asynchronous loading !-->
  <script charset="utf-8">
$script([
  '/vendor/jquery/2.1.1/jquery.js',
  '/vendor/angular/1.3.0/angular.js',
  '/vendor/angular/1.3.0/angular-animate.js',
  'app/app.js',
'app/common/filters/disabled-player-filter.js',
'app/common/formatters/capitalize.js',
'app/controls/bts-combo/bts-combo.js',
'app/controls/game-date/game-date.js',
'app/controls/pager/pager.js',
'app/controls/player-selector/player-selector.js',
'app/controls/sortable/sortable.js',
'app/controls/tabs/tabs.js',
'app/data/data-source.js',
'app/games/games.js',
'app/ratings/ratings.js',
'app/settings/options/options.js',
'app/settings/players/players.js',
'app/settings/selectable-list.js',
'app/settings/settings.js',
'app/table/table.js'
], 'scripts');
</script>


  <script>
    $script.ready('scripts', function() {
      angular.module('config', []).constant('config', {});
      angular.bootstrap(document, ['soccerPad']);
    });
  </script>
</body>
</html>
